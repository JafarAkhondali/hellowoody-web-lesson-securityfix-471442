<!DOCTYPE html>
<html>
    <head></head>
    <body></body>
</html>
<script>
const canvas = document.createElement("canvas")

if(!canvas.getContext){
    console.log("!!!")
}else{
    document.body.appendChild(canvas)

    const w = 500 , h = 500

    canvas.width = w
    canvas.height = h
    canvas.style.width = w
    canvas.style.height = h
    canvas.style.border = "1px solid #000"

    const ctx = canvas.getContext("2d")
    const txt = "啦啦"   // 1
   
    ctx.font = "35px sans-serif"
    ctx.textBaseline = "top" 
    ctx.fillText(txt,0,0)

    const mText  = ctx.measureText(txt)  // 1
    const text_w = Math.floor(mText.width)
    // const text_w = mText.width
    // console.log(mText)

    const {data,width,height} = ctx.getImageData(0,0,text_w,35)
    console.log(data,width,height)

    const nums = []

    for(let i = 0 ; i < data.length/4 ; i++){
        if(data[i*4+3] != 0){
            const x = Math.floor( i % text_w)
            const y = Math.floor( i / text_w)
            nums.push([x*5,y*5+50])
        }  
    }

    // console.table(nums)

    const particles = []

    function Particle(x,y){
        this.x = x 
        this.y = y
    }

    Particle.prototype.draw = function(){
        // console.log("draw")
        ctx.beginPath()
        ctx.arc(this.x,this.y,2,0,Math.PI*2)
        ctx.fillStyle = "blue"
        ctx.fill()
    }

    nums.forEach(p => particles.push(new Particle(p[0],p[1])))


    particles.forEach(p => p.draw())



}
</script>