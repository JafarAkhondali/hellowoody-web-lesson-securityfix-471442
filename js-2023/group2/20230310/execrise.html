<!--
作业
1. html，input，yyyy-mm-dd
2. 根据yyyy-mm-dd转成指定date，获取星期几
3. 再input 下方输出一句话，这个星期几是所在月份中的第几个星期几？
-->
<!Doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>2023-03-10 课堂练习</title>
    </head>
    <body>
        <input id="input_el" placeholder="yyyy-MM-dd" >
        <button onclick="sub()">提交</button>
        <h2>结果</h2>
        <p></p>
    </body>
</html>
<script>
/*
    1.input value
    2.new Date() 
    3.year month date day
    4.10/7 
    
*/ 
function sub(){
    const str = document.querySelector("#input_el").value
    if(str.length > 10){
        alert("invalid date")
        return 
    }
    // yyyy-mm-dd
    let idx = 0;
    const idx_arr = []
    while(idx >= 0){
        idx = str.indexOf("-",idx)
        if(idx < 0){
            break
        }else{
            idx_arr.push(idx)
            idx++
        }
    }
    console.log("idx_arr",idx_arr)
    const Y = str.substring(0,idx_arr[0])
    const M = str.substring(idx_arr[0]+1,idx_arr[1])
    const D = str.substring(idx_arr[1]+1)

    console.log(`${Y} ${M} ${D}`)

    // console.log(str.split("-"))

    const date = new Date(Y,M-1,D)
    console.log(date)
    console.log(date.getDay())

    let count = 0
    /*
        i = i - 7
        i -= 7
        i += 7
        i *= 7
        i /= 7
        i %= 7
    */ 
    // for(let i = D ; i > 0 ; i -= 7){
    //     count++
    // }

    // let j = D; 
    // while(j > 0){
    //     count++
    //     j-=7
    // }


    const quotient = Math.floor(D/7)
    count = quotient + (D%7 === 0 ? 0 : 1)


    document.querySelector("p").innerHTML = `${D}号是${M}月份中的第${count}个星期${date.getDay() === 0 ? "日" : date.getDay()}`
}
</script>
