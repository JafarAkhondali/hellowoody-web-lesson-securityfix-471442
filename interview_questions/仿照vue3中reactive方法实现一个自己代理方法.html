<!DOCTYPE html>
<html>
    <body>
        <input id="in" oninput="change(event)"/>
        <div id="app"></div>
    </body>
</html>
<script>
const initData = {
    a:1,
    b:"hello",
    c:true,
    d:{
        name:"zhang"
    },
    e:[1,2,3]
}
// https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy
// ES7 Proxy 2021截止 chrome firefox edge opera 
// handler中的属性是es语法规定
// handler中的属性不止vue3中proxy的这5种
const handler = {
    deleteProperty(){},
    has(){},
    ownKeys(){},
    set(data,prop,newVal,proxy_data){
        // console.log("set handler")
        // console.log(arguments)
        data[prop] = newVal
    },
    get:function(data,key,proxy_data){
        // console.log(arguments)
        return data[key]
    }
}
const proxyData = new Proxy(initData,handler);

console.log(initData)
console.log("===========")
console.log(proxyData)

////////////////////////////////

const math = {
    val:1
}

const squareMath = new Proxy(math,{
    set(data,prop,newVal){
        data[prop] = newVal * newVal
    }
})

////////////////////////////////

const inputData = {
    val:""
}
const proxyInput = new Proxy(inputData,{
    set(data,prop,newVal){
        data[prop] = newVal
        document.getElementById("app").innerText = newVal
    }
})

function change(e){
    // console.log(e.target.value)
    proxyInput.val = e.target.value
}

</script>